MODULE CounterV3

TITLE 'CounterV3'

DECLARATIONS

CLOCK PIN 1;
RESET PIN 11;
BITS0 PIN 10;
BITS1 PIN 9;

ZERO PIN 14 ISTYPE 'COM';
ONE PIN 15 ISTYPE 'COM';

BITS8..BITS2 pin 17..23 istype 'reg';

!BUFFERED_OUT_BEGIN pin 16 istype 'reg';
OUT_BEGIN pin 8 istype 'com';


EQUATIONS

BITS2.d = !RESET & (BITS2 $ (!BITS1 & !BITS0));
BITS3.d = !RESET & (BITS3 $ (!BITS2 & !BITS1 & !BITS0));
BITS4.d = !RESET & (BITS4 $ (!BITS3 & !BITS2 & !BITS1 & !BITS0));
BITS5.d = !RESET & (BITS5 $ (!BITS4 & !BITS3 & !BITS2 & !BITS1 & !BITS0));
BITS6.d = !RESET & (BITS6 $ (!BITS5 & !BITS4 & !BITS3 & !BITS2 & !BITS1 & !BITS0));
BITS7.d = !RESET & (BITS7 $ (!BITS6 & !BITS5 & !BITS4 & !BITS3 & !BITS2 & !BITS1 & !BITS0));
BITS8.d = RESET # (BITS8 $ (!BITS7 & !BITS6 & !BITS5 & !BITS4 & !BITS3 & !BITS2 & !BITS1 & !BITS0)); //Vestigial

//ZERO = !(BITS0 # BITS1 # BITS2 # BITS3 # BITS4 # BITS5 # BITS6 # BITS7 #BITS8);
ZERO = !(BITS2 # BITS3 # BITS4 # BITS5 # BITS6 # BITS7 #BITS8);
ONE = !(!BITS2 # BITS3 # BITS4 # BITS5 # BITS6 # BITS7 #BITS8);


[BITS2..BITS8].CLK = CLOCK;

BUFFERED_OUT_BEGIN.CLK = CLOCK;
BUFFERED_OUT_BEGIN.D=1;
BUFFERED_OUT_BEGIN.AR = OUT_BEGIN;
[BITS2..BITS8].AR=0; //This code cannt work because everything, even the counter, will be reset. 0/10.





END



